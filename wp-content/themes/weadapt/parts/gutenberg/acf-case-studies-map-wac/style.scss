@import '__settings/init';

.case-studies-map-wac {
  --map-height: calc(100vh - 72px - 72px - var(--wp-admin--admin-bar--height, 0px));
  border: 0 !important;
  position: relative;
  overflow: hidden;

  &.block-spacing--pt {
    padding-top: rem(80);
  }

  &.list {
    padding-bottom: 0;
  }

  .acf-map {
    width: 100%;
    background: $color--bg;
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    height: 100%;
    min-width: rem(260);
    bottom: 0;

    .acf-block-preview & {
      background-image: url("data:image/svg+xml,%3Csvg style='enable-background:new 0 0 64 64;' version='1.1' viewBox='0 0 64 64' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cpath d='M63.5,16c-0.3-0.2-0.7-0.3-1-0.1l-20.4,7.3l-14.3-5.2c0.8-2,1.2-3.8,1.2-5.3c0-2.7-1-5.1-2.9-7c-1.9-1.9-4.4-2.9-7-2.9 c-5.5,0-9.9,4.4-9.9,9.9c0,1.9,0.7,4.2,1.9,7L0.7,23.2c-0.4,0.2-0.7,0.6-0.7,1v36c0,0.4,0.2,0.7,0.5,0.9c0.2,0.1,0.4,0.2,0.6,0.2 c0.1,0,0.3,0,0.4-0.1L21.9,54l19.8,7.3c0.2,0.1,0.5,0.1,0.7,0l20.8-7.4c0.4-0.2,0.7-0.6,0.7-1v-36C64,16.5,63.8,16.2,63.5,16z M19.1,4.8c2.1,0,4,0.8,5.4,2.3c0,0,0,0,0,0c1.5,1.4,2.3,3.4,2.3,5.4c0,1.4-0.5,3.3-1.5,5.5c-1.8,4-4.8,8.2-6.2,10.1 c-0.2-0.2-0.3-0.4-0.5-0.7c-1.3-1.8-3.4-4.8-4.9-7.9c-1.5-2.9-2.2-5.3-2.2-7.1C11.4,8.3,14.9,4.8,19.1,4.8z M61.8,52.1l-19.7,7 l-19.8-7.3c-0.1,0-0.3-0.1-0.4-0.1c-0.1,0-0.3,0-0.4,0.1L2.2,58.7V25l10-3.5c0,0,0,0,0,0.1c0.1,0.1,0.1,0.2,0.2,0.3 c0.1,0.2,0.2,0.4,0.3,0.6c0.1,0.1,0.1,0.2,0.2,0.3c0.1,0.2,0.2,0.4,0.3,0.6c0.1,0.1,0.1,0.2,0.2,0.3c0.1,0.2,0.2,0.4,0.3,0.5 c0.1,0.1,0.1,0.2,0.2,0.3c0.1,0.2,0.2,0.3,0.3,0.5c0.1,0.1,0.1,0.2,0.2,0.3c0.1,0.2,0.2,0.3,0.3,0.5c0.1,0.1,0.1,0.2,0.2,0.3 c0.1,0.2,0.2,0.3,0.3,0.5c0.1,0.1,0.1,0.2,0.2,0.3c0.1,0.2,0.2,0.3,0.3,0.5c0.1,0.1,0.1,0.2,0.2,0.2c0.1,0.2,0.2,0.3,0.3,0.4 c0,0.1,0.1,0.1,0.1,0.2c0.1,0.2,0.2,0.3,0.3,0.4c0,0,0.1,0.1,0.1,0.1c0.1,0.1,0.2,0.3,0.3,0.4c0,0,0.1,0.1,0.1,0.1 c0.1,0.1,0.2,0.3,0.3,0.4c0,0,0,0,0,0c0.1,0.1,0.2,0.2,0.3,0.3c0,0,0,0,0,0c0.2,0.3,0.4,0.5,0.4,0.6c0.2,0.3,0.5,0.4,0.9,0.4 c0.3,0,0.6-0.2,0.9-0.4c0,0,0.1-0.1,0.3-0.3c0,0,0.1-0.1,0.1-0.1c0.1-0.1,0.1-0.1,0.2-0.2c0,0,0.1-0.1,0.1-0.1 c0.1-0.1,0.1-0.2,0.2-0.3c0-0.1,0.1-0.1,0.1-0.2c0.1-0.1,0.2-0.2,0.2-0.3c0.1-0.1,0.1-0.2,0.2-0.3c0.1-0.1,0.2-0.2,0.3-0.4 c0.1-0.1,0.1-0.2,0.2-0.3c0.1-0.1,0.2-0.2,0.3-0.4c0.1-0.1,0.2-0.2,0.2-0.3c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.1,0.2-0.3,0.3-0.4 c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.1,0.2-0.3,0.3-0.4c0.1-0.2,0.2-0.3,0.3-0.5 c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.3,0.3-0.5 c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.4,0.3-0.5c0.1-0.2,0.2-0.3,0.2-0.5c0,0,0,0,0-0.1l14.8,5.4 c0.2,0.1,0.5,0.1,0.7,0l19.3-6.9V52.1z'/%3E%3Cpath d='M52.5,42.4c0.2,0.1,0.5,0.1,0.7,0.1c0.6,0,1.2-0.2,1.7-0.5c0.7-0.5,1.2-1.2,1.4-2c0.2-0.8,0-1.7-0.4-2.4 c-0.5-0.7-1.2-1.2-2-1.4c-1.7-0.4-3.5,0.7-3.9,2.4v0c-0.2,0.8,0,1.7,0.4,2.4C51,41.7,51.7,42.2,52.5,42.4z M52.2,39 c0.1-0.6,0.7-0.9,1.2-0.8c0.3,0.1,0.5,0.2,0.6,0.5c0.1,0.2,0.2,0.5,0.1,0.8c-0.1,0.3-0.2,0.5-0.5,0.6c-0.2,0.1-0.5,0.2-0.8,0.1 c-0.3-0.1-0.5-0.2-0.6-0.5C52.2,39.5,52.2,39.3,52.2,39z'/%3E%3Cpath d='M11,39.1l-0.7,0.4l-0.4-0.7c-0.3-0.5-1-0.7-1.5-0.3c-0.5,0.3-0.7,1-0.3,1.5l0.4,0.7l-0.7,0.4c-0.5,0.3-0.7,1-0.3,1.5 C7.6,43,8,43.1,8.3,43.1c0.2,0,0.4-0.1,0.6-0.2l0.7-0.4l0.4,0.7c0.2,0.3,0.6,0.5,0.9,0.5c0.2,0,0.4-0.1,0.6-0.2 c0.5-0.3,0.7-1,0.3-1.5l-0.4-0.7l0.7-0.4c0.5-0.3,0.7-1,0.3-1.5C12.2,38.9,11.5,38.8,11,39.1z'/%3E%3Cpath d='M21.3,42.1c-1.3,0-3-0.2-4.1-0.5c-0.6-0.1-1.2,0.3-1.3,0.9c-0.1,0.6,0.3,1.2,0.9,1.3c1.1,0.2,2.9,0.5,4.5,0.5c0,0,0,0,0,0 c0.6,0,1.1-0.5,1.1-1.1C22.4,42.6,21.9,42.1,21.3,42.1z'/%3E%3Cpath d='M29.5,38.3c-0.7,1-1.5,1.8-2.5,2.4c-0.3,0.2-0.7,0.4-1.1,0.6c-0.6,0.2-0.8,0.9-0.6,1.5c0.2,0.4,0.6,0.7,1,0.7 c0.1,0,0.3,0,0.4-0.1c0.5-0.2,0.9-0.4,1.3-0.7c1.2-0.8,2.2-1.7,3.1-2.9c0.4-0.5,0.3-1.2-0.2-1.5C30.6,37.7,29.9,37.8,29.5,38.3z'/%3E%3Cpath d='M37.5,31.1c-1.1,0-1.7,0.3-2.3,0.5c-1.4,0.6-2.6,1.9-2.9,2.3c-0.4,0.5-0.3,1.2,0.1,1.6c0.2,0.2,0.5,0.3,0.7,0.3 c0.3,0,0.6-0.1,0.8-0.4c0.5-0.6,1.3-1.3,2.1-1.7c0.6-0.2,0.8-0.3,1.5-0.4c0.6,0,1.1-0.5,1.1-1.1C38.6,31.6,38.1,31.1,37.5,31.1z'/%3E%3Cpath d='M41.6,32.8c-0.2,0.6,0,1.2,0.6,1.5c1.1,0.5,2.7,1.3,3.9,2.2c0.2,0.1,0.4,0.2,0.6,0.2c0.4,0,0.7-0.2,0.9-0.5 c0.3-0.5,0.2-1.2-0.3-1.5c-1.4-0.9-3-1.8-4.3-2.3C42.5,32,41.9,32.3,41.6,32.8z'/%3E%3Cpath d='M19.1,15.2c1.9,0,3.4-1.5,3.4-3.4S21,8.4,19.1,8.4c-1.9,0-3.4,1.5-3.4,3.4S17.3,15.2,19.1,15.2z M19.1,10.6 c0.6,0,1.2,0.5,1.2,1.2c0,0.6-0.5,1.2-1.2,1.2c-0.6,0-1.2-0.5-1.2-1.2C18,11.2,18.5,10.6,19.1,10.6z'/%3E%3C/svg%3E");
      background-size: rem(120);
      background-position: center;
      background-repeat: no-repeat;
    }

    > div {
      background: $color--bg !important;
    }

    > .marker {
      display: none;
    }

    .marker {
      background-color: $color--primary;
    }

    img {
      max-width: inherit !important;
    }

    .gmnoprint,
    .gm-fullscreen-control {
      margin: 0 !important;
    }

    .gm-style {
      .gm-style-iw-c {
        padding: rem(20);
      }

      .gm-style-mtc {
        label,
        div {
          display: inline-block;
          margin-bottom: 0;
        }
      }

      li[class*="-checkbox-menu-item"] {
        display: flex;

        span {
          margin-right: rem(2);
        }
      }
    }
  }

  .map {
    &__header {
      width: rem(596);
      max-width: 80%;
      text-align: left;
      margin-bottom: rem(80);

      & .subtitle {
        text-transform: none;
      }

      & .title {
        margin-top: rem(16);
        margin-bottom: rem(16);
      }
    }

    &__area {
      position: relative;
      overflow: hidden;
    }

    &__wrap {
      position: relative;
      min-height: var(--map-height);

      @include media('>=lg') {
        height: var(--map-height);
      }

      .acf-block-preview & {
        min-height: rem(400) !important;
        height: rem(400) !important;
      }
    }

    &__overlay {
      pointer-events: none;
      display: flex;
      flex-direction: column;
      opacity: 0;
      position: relative;

      @include media('>=lg') {
        height: 100%;
        bottom: 0;
        position: absolute;
        top: 0;
        left: 0;
        flex-direction: row;
        width: rem(407);
      }

      @include media('>=1623px') {
        width: calc(100% - rem($container-padding * 2 + $container-width));
      }
    }

    &__info {
      width: 100%;
      margin-left: auto;
      margin-right: auto;
      padding-top: rem(40);
      padding-bottom: rem(40);
      position: relative;

      .close {
        position: absolute;
        top: rem(24);
        right: rem(24);
        color: $static-color--white;
        cursor: pointer;
        display: block;
        width: rem(24);
        height: rem(24);
        transition: opacity $transition;

        &:hover {
          opacity: .5;
        }

        svg {
          width: 100%;
        }
      }

      &__bg {
        width: rem(260);
        min-width: rem(260);
        background: url('/svg/bg-maps-bulb.svg') center top no-repeat;
        box-shadow: 0 0 0 3000px rgba(0, 0, 0, 0.75);
        max-width: 100%;
        background-size: contain;
        margin-left: auto;
        margin-right: auto;
        height: rem(280);

        &--cip {
          background: url('/svg/bg-maps-sun.svg') center top no-repeat;
        }
      }

      &__content {
        width: rem(440);
        max-width: 100%;
        margin: rem(40) auto;
        color: $static-color--white;
        padding: 0 rem($container-padding);
        text-align: center;
      }

      &__title {
        color: currentColor;
        margin: 0;
        font-size: rem(20);
      }

      &__position {
        margin-top: 0;
        margin-left: rem(10);
        margin-right: rem(10);
        flex-grow: 1;

        &__wrap {
          display: flex;
          flex-wrap: wrap;
          margin-top: rem(20);
          margin-left: rem(-10);
          margin-right: rem(-10);
        }

        &__title {
          font-weight: $font-weight-content-medium;
          margin-bottom: rem(5);
        }
      }
    }

    &__content {
      padding: 0 rem($container-padding) rem($container-padding);
      height: 100%;
      overflow-y: auto;

      &__wrap {
        background-color: $color--body-bg;
        width: 100%;
        height: 0;
        overflow: hidden;
        position: relative;

        @include media('>=lg') {
          width: calc(100% - 407px);
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
        }

        @include media('>=1623px') {
          width: rem($container-padding * 2 + $container-width);
        }

        .loader {
          animation: rotate $animation-speed linear infinite;
          width: rem(50);
          height: rem(50);
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
          margin: auto;
          display: none;
        }
      }

      &.loading {
        + .loader {
          display: block;
        }
      }

      .archive-main__container {
        padding-left: 0;
        padding-right: 0;
      }
    }

    &__loader {
      width: rem(30);
      height: rem(48);
      align-items: center;
      justify-content: center;
      display: none;

      .loader {
        animation: rotate $animation-speed linear infinite;
        width: rem(30);
        height: rem(30);
      }
    }

    &__controls {
      padding: rem(12) rem($container-padding);
      background: $color--bg;
      display: flex;
      gap: rem(16);
      flex-wrap: wrap;

      &.loading {
        pointer-events: none;

        .map__loader {
          display: flex;
        }
      }

      .button {
        display: inline-flex;
        align-items: center;

        height: rem(48);
        padding: rem(11) rem(15);

        font-family: $font-family-headings;
        font-weight: $font-weight-heading;
        color: $color--white;

        border: rem(2) solid $color--primary;
        border-radius: rem(5);
        background-color: $color--primary;

        transition: color $transition, background-color $transition,
        border-color $transition, opacity $transition;

        @include font(14, 22);
        @include media('>=md') {
          @include font(16, 22);
        }

        &:hover {
          color: $color--black;
          border-color: $color--black;
          background-color: transparent;
        }

        &.is-style-outline {
          color: $color--primary;
          background-color: $color--white;

          &:hover {
            color: $color--white;
            border-color: $color--primary;
            background-color: $color--primary;
          }
        }

        svg {
          max-width: rem(24);
          margin-left: rem(10);
        }
      }
    }

    &__search {
      position: relative;
      width: rem(280);

      input[type="search"] {
        margin-bottom: 0;
        width: 100%;
        padding-right: rem(58);
      }

      button {
        width: rem(48);
        height: rem(48);
        position: absolute;
        top: 0;
        right: 0;
        background-color: transparent;
        border-color: transparent;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }

    &__select {
      width: rem(280);

      select {
        display: none;
      }

      .theme-select {
        height: rem(48);
        border-radius: rem(5);
        background: $static-color--white;
      }

      .select-pure {
        &__autocomplete {
          padding: rem(12) rem(15) !important;
          margin: 0;
        }

        &__select {
          padding: rem(12) rem(54) rem(12) rem(16);
          height: rem(48);
          position: relative;
          border: 0;

          &:after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: rem(54);
            background-position: center;
            background-repeat: no-repeat;
            background-image: url("data:image/svg+xml,%3Csvg width='28' height='16' viewBox='0 0 18 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 1L9 9L1 1' stroke='currentColor' stroke-linecap='square'%3E%3C/path%3E%3C/svg%3E");
            content: '';
            transition: transform $transition;
          }

          &--opened:after {
            transform: rotate(180deg);
          }
        }

        &__label {
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          display: block;
        }
      }
    }


    &__studies-list {
      display: none;
    }
  }

  &.has-overlay {
    .map__overlay {
      pointer-events: auto;
      opacity: 1;
      transition: opacity $transition;
    }

    .map__content__wrap {
      overflow: unset;
      height: auto;
      min-height: rem(100);
      padding-top: rem($container-padding);
    }

    .map__info__bg--cip {
      display: none;
    }

    &--cip {
      .map__info__bg {
        display: none;
      }

      .map__info__bg--cip {
        display: block;
      }
    }
  }
}


.case-studies-map-wac.list .map__studies-list {
  display: block;
}

.case-studies-map-wac.list .map__area {
  display: none;
}

.case-studies-map-wac .container .map__header.container {
  margin-left: 0;
}


.page-content--cip {
  padding-bottom: rem(80);

  iframe {
    width: 100%;
    height: 500px;
    overflow: auto;
    border: none;
  }

  .cip {
    &__title {
      margin: 0 0 rem(18);

      @include font(28, 40);

      @include media('>=md') {
        @include font(40, 56);
        margin-bottom: rem(27);
      }
    }

    &__subtitle {
      @include font(24, 32);
      margin: rem(40) 0;

      @include media('>=md') {
        @include font(32, 40);
      }
    }
  }
}
