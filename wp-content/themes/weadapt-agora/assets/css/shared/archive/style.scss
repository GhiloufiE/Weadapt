@import '__settings/init';

.archive-main {
	h2,
	h3,
	h4,
	h5,
	h6 {
		font-family: $font-family-base;
	}
	&__row {
		flex-direction: column;
		align-items: flex-start;
		margin-top: rem(24);

		@include media('>=md') {
			margin-top: rem(56);
			flex-direction: row;
		}

		&:first-child {
			margin-top: rem(32);

			@include media('>=md') {
				margin-top: rem(150);
			}
		}

		.page-content--search & {
			margin-top: rem(80);
		}
	}
	&__content {
		max-width: 100%;
		padding: 0 rem($container-padding);
		margin: 0 0 rem(80);
		width: 100%;

		@include media('>=md') {
			flex: 0 0 65%;
			max-width: 65%;
			padding: 0 rem(92) 0 rem($container-padding);
		}

		& > *:first-child {
			margin-top: 0;
		}

		section {
			border: 0;
		}

		.cta-widget {
			margin: rem(56) 0 0;
		}

		.forum-quote {
			padding: rem(16);
			margin: rem(40) 0 0;
			background-color: $color--tertiary;
			border-radius: rem(5);
			@include font(14,20);
			text-align: center;
		}
	}
	&__entry {
		@include font(14, 20);
		color: $color--text;

		@include media('>=md') {
			@include font(18, 24);
		}

		& > style:first-child + * {
			margin-top: 0;
		}

		& > *:first-child {
			margin-top: 0;
		}

		& > *:last-child {
			margin-bottom: 0;
		}

		h1,
		h2,
		h3,
		h4,
		h5,
		h6 {
			margin: rem(32) 0;
			font-weight: $font-weight-content-medium;

			@include media('>=md') {
				margin: rem(40) 0;
			}
		}

		h1 {
			font-weight: $font-weight-content-bold;
		}

		h2 {
			font-weight: $font-weight-content-bold;
			@include font(24, 32);

			@include media('>=md') {
				@include font(32, 40);
			}
		}
		h3 {
			@include font(24, 32);
		}
		h4 {
			@include font(20, 26);
		}

		&--smaller {
			@include font(16, 22);
		}

		blockquote {
			padding: rem(24);
			margin-left: 0;
			margin-right: 0;
			color: $color--text-desc;
			border-width: rem(1) 0;
			border-style: solid;
			border-color: $color--border;
			font-size: rem(20);
			font-style: italic;
			font-weight: $font-weight-heading;
		}

		.additional-resources {
			h1,h2,h3,h4,h5,h6 {
				@include font(20, 26);
				font-weight: $font-weight-content-medium;
				position: relative;
				padding: 0 0 rem(8);
				margin-bottom: rem(24);
				max-width: rem(368);

				@include media('>=md') {
					@include font(24, 32);
					padding-bottom: rem(24);
				}

				&:after {
					border-bottom: rem(1) solid $color--border;
					content: '';
					display: block;
					position: absolute;
					left: 0;
					bottom: 0;
					width: 100%;
					max-width: rem(368);
				}
			}
		}
	}
	&__aside {
		padding: 0 rem($container-padding);
		margin: 0 0 rem(80);

		> *:first-child {
			margin-top: 0;
		}
		> *:last-child {
			margin-bottom: 0;
		}

		@include media('>=md') {
			flex: 0 0 35%;
			max-width: 35%;
			padding: 0 rem($container-padding) 0 rem(30);
			border-left: rem(1) solid $color--border;
		}
	}
	&__published {
		display: flex;
		align-items: center;
		color: $color--text;
		@include font(14, 14);

		&-icon {
			display: flex;
			margin-right: rem(8);
		}
	}
	&__search-title {
		@include font(24, 32);
		font-weight: $font-weight-content-medium;
		font-family: $font-family-base;
		margin-top: rem(80);

		& + .archive-main__row {
			margin-top: rem(56);
		}
	}

	.trending-discussions {
		margin-top: rem(80);

		&__title {
			@include media('>=md') {
				font-size: rem(32);
			}
		}

		.cpt-query {
			margin-top: rem(64);
		}
	}
}

.cpt-content-heading {
	margin: 0 0 rem(30);

	@include media('>=md') {
		margin-bottom: rem(40);
	}

	&__title {
		margin: 0 0 rem(24);
		font-weight: $font-weight-content-bold;
		@include font(24, 32);

		@include media('>=md') {
			margin: 0 0 rem(40);
			@include font(32, 40);
		}
	}

	&__text {
		@include font(16, 22);
		color: $color--text;
	}

	& + .single-tabs-nav {
		margin: rem(40) 0;
	}
}

.cpt-more {
	display: flex;
	justify-content: center;
	margin: 0;
	margin-top: rem(56);

	&.hidden {
		display: none;
	}

	.wp-block-button__link {
		justify-content: center;

		@include media('>=md') {
			min-width: rem(128);
		}
	}

	&__btn {
		&.loading {
			opacity: 0.5;
			pointer-events: none;
		}
	}
}

.cpt-latest {
	.cpt-list-item {
		margin: 0 0 rem(56);
		display: flex;
		flex-wrap: wrap;

		&.is-draft {
			opacity: .6;
			filter: grayscale(1.0);
		}
		&:last-child {
			margin-bottom: 0;
		}

		&__content {
			flex: 0 0 100%;

			@include media('>=lg') {
				flex: 1;
			}

			+ .cpt-list-item__content {
				@include media('>=lg') {
					max-width: calc(100% - 174px);
				}
			}
		}

		&__image {
			flex: 0 0 100%;
			max-width: rem(99);

			@include media('>=md') {
				max-width: rem(174);
			}

			@include media('>=lg') {
				margin-bottom: 0;
			}
		}
	}

	.theme-list-item {
		.cpt-list-item__image {
			@include media('>=lg') {
				margin-right: rem(24);
			}
		}

		&--organisation {
			.cpt-list-item__image img {
				object-fit: contain;
			}
		}
	}

	.blog-list-item {
		@include media('>=lg') {
			flex-direction: row-reverse;
		}

		.cpt-list-item__image {
			@include media('>=lg') {
				margin: 0 0 0 rem(24);
			}
		}
	}
}

.row--ajax {
	transition: opacity $transition;

	&.loading {
		opacity: 0.5;
		pointer-events: none;
	}

	.results-count {
		position: relative;
		top: rem(-20);
		color: $color--text-light;
		@include font(14, 20);

		@include media('>=md') {
			top: rem(-30);
		}

		&:not(:first-child) {
			display: none !important;
		}
	}
}
